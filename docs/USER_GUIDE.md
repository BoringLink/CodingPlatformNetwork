# 用户手册

## 1. 系统功能概述

教育知识图谱系统是一个基于图数据库和大语言模型的教育数据分析平台，旨在帮助教育工作者更好地理解学生学习情况、课程效果和互动模式。

### 1.1 核心功能
- **数据导入与处理**: 支持批量导入学生、教师、课程、互动记录和错误记录等数据
- **知识图谱构建**: 自动构建学生、教师、课程、知识点和错误类型之间的关系网络
- **可视化交互**: 提供直观的图谱可视化界面，支持缩放、拖拽、筛选等操作
- **子视图管理**: 允许创建和管理基于特定条件的子视图
- **节点详情查看**: 支持查看节点的详细信息和关联关系
- **分析报告生成**: 自动生成学生表现、课程效果和互动模式等分析报告
- **数据导出**: 支持将报告和图谱数据导出为不同格式

## 2. 系统访问

### 2.1 访问地址
- **前端应用**: http://localhost:3000
- **后端API**: http://localhost:8000
- **API文档**: http://localhost:8000/docs

### 2.2 登录系统
当前版本无需登录，直接访问即可使用所有功能。

## 3. 数据导入

### 3.1 数据导入流程

1. 在导航栏点击"数据导入"进入导入页面
2. 选择数据类型（学生数据、教师数据、课程数据、互动记录、错误记录）
3. 上传数据文件（支持CSV、JSON格式）
4. 预览并验证数据
5. 点击"开始导入"执行导入
6. 查看导入进度和结果

### 3.2 数据格式要求

#### 3.2.1 学生数据格式
```json
[
  {
    "id": "student_001",
    "name": "张三",
    "age": 15,
    "grade": "高一",
    "class": "1班"
  }
]
```

#### 3.2.2 互动记录格式
```json
[
  {
    "id": "interaction_001",
    "from_student_id": "student_001",
    "to_student_id": "student_002",
    "content": "你好，这个问题怎么解决？",
    "timestamp": "2024-01-01T10:00:00Z",
    "type": "chat"
  }
]
```

#### 3.2.3 错误记录格式
```json
[
  {
    "id": "error_001",
    "student_id": "student_001",
    "course_id": "course_001",
    "content": "计算错误",
    "timestamp": "2024-01-01T11:00:00Z",
    "difficulty": "medium"
  }
]
```

### 3.3 导入进度查看
- 导入过程中会显示实时进度
- 导入完成后会显示成功和失败的记录数
- 支持查看导入日志和错误信息

## 4. 图谱可视化

### 4.1 进入可视化界面
在导航栏点击"图谱可视化"进入可视化界面。

### 4.2 基本操作

#### 4.2.1 缩放与拖拽
- **缩放**: 使用鼠标滚轮或界面右下角的缩放控件
- **拖拽**: 按住鼠标左键拖动画布
- **重置视图**: 点击"重置视图"按钮恢复默认视图

#### 4.2.2 节点交互
- **悬停**: 将鼠标悬停在节点上查看基本信息
- **点击**: 点击节点高亮显示其邻居节点和关系
- **双击**: 双击节点查看详细信息

#### 4.2.3 筛选功能
使用左侧筛选面板可以按以下条件筛选图谱：
- **节点类型**: 选择要显示的节点类型（学生、教师、课程、知识点、错误类型）
- **关系类型**: 选择要显示的关系类型（聊天互动、点赞互动、教学互动、学习关系等）
- **时间范围**: 筛选特定时间范围内的关系
- **属性筛选**: 根据节点属性进行筛选

### 4.3 布局算法
支持多种布局算法，可在右上角切换：
- **力导向布局**: 基于物理模拟的力导向布局，适合展示复杂网络结构
- **层次布局**: 按层次结构排列节点，适合展示有向图和树形结构
- **圆形布局**: 将节点排列成圆形，适合展示循环关系
- **同心圆布局**: 将节点按重要性排列成同心圆，适合展示中心化网络
- **网格布局**: 将节点排列成网格，适合展示规则结构

## 5. 子视图管理

### 5.1 创建子视图

1. 在可视化界面上调整筛选条件
2. 点击"保存为子视图"按钮
3. 输入子视图名称和描述
4. 点击"确定"创建子视图

### 5.2 管理子视图

1. 在可视化界面左侧点击"子视图管理"打开子视图面板
2. 查看所有已创建的子视图
3. 点击子视图名称切换到该子视图
4. 点击"编辑"按钮修改子视图名称和描述
5. 点击"删除"按钮删除子视图

### 5.3 子视图特性
- 子视图独立保存筛选条件和布局设置
- 子视图可以快速切换，方便比较不同视角的数据
- 子视图支持分享给其他用户（当前版本暂不支持）

## 6. 节点详情查看

### 6.1 查看节点详情

1. 在可视化界面上双击节点
2. 或右键点击节点，选择"查看详情"
3. 在弹出的详情对话框中查看节点的完整信息

### 6.2 节点详情内容

- **基本信息**: 节点ID、名称、类型、创建时间等
- **属性信息**: 节点的所有属性
- **关联关系**: 与该节点相关的所有关系，包括入度和出度关系
- **统计信息**: 节点的关系数量、权重等统计数据

### 6.3 邻居节点查看
在节点详情对话框中，可以查看该节点的直接邻居节点，并可以点击邻居节点查看其详情。

## 7. 分析报告

### 7.1 生成报告

1. 在导航栏点击"报告"进入报告页面
2. 选择报告类型：
   - **学生表现分析**: 分析学生的学习情况、错误模式和进步趋势
   - **课程效果分析**: 分析课程的参与度、错误率和知识点掌握情况
   - **互动模式分析**: 分析学生之间的互动网络和孤立节点
   - **图谱统计报告**: 提供图谱的整体统计信息

3. 设置报告参数（如时间范围、课程、学生等）
4. 点击"生成报告"执行报告生成
5. 查看和下载报告

### 7.2 报告内容

#### 7.2.1 学生表现分析报告
- 学生基本信息
- 高频错误类型统计
- 知识点掌握情况
- 学习进步趋势
- 互动参与度

#### 7.2.2 课程效果分析报告
- 课程基本信息
- 学生参与度统计
- 整体错误率
- 知识点掌握分布
- 课程改进建议

#### 7.2.3 互动模式分析报告
- 互动网络可视化
- 核心节点识别
- 孤立节点统计
- 互动类型分布
- 互动频率分析

#### 7.2.4 图谱统计报告
- 节点数量和类型分布
- 关系数量和类型分布
- 图谱密度和平均路径长度
- 度分布统计

### 7.3 报告导出
支持将报告导出为以下格式：
- **JSON**: 结构化数据格式，便于后续处理
- **PDF**: 适合打印和分享的文档格式
- **CSV**: 适合在Excel中打开和分析的数据格式

## 8. 常见问题解决

### 8.1 数据导入失败
- 检查数据格式是否符合要求
- 确保必填字段完整
- 检查文件大小是否超过限制（当前限制为100MB）
- 查看导入日志获取详细错误信息

### 8.2 图谱加载缓慢
- 减少显示的节点数量（使用筛选条件）
- 降低查询深度
- 选择更高效的布局算法
- 优化浏览器性能（关闭其他标签页、清除缓存）

### 8.3 节点显示不完整
- 检查筛选条件是否过于严格
- 调整查询深度
- 检查节点是否存在关联关系

### 8.4 报告生成失败
- 检查报告参数设置是否正确
- 确保有足够的数据生成报告
- 查看系统日志获取详细错误信息

### 8.5 无法保存子视图
- 检查子视图名称是否已存在
- 确保筛选条件有效
- 检查浏览器存储权限

## 9. 系统快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + +` | 放大视图 |
| `Ctrl + -` | 缩小视图 |
| `Ctrl + 0` | 重置缩放 |
| `Space + 拖拽` | 平移视图 |
| `Esc` | 取消选择 |
| `F5` | 刷新视图 |
| `Ctrl + S` | 保存当前视图（仅在编辑模式下） |

## 10. 术语解释

- **节点**: 图谱中的实体，如学生、教师、课程、知识点、错误类型等
- **关系**: 节点之间的连接，表示实体之间的关联，如聊天互动、学习关系等
- **属性**: 节点或关系的特征信息，如学生的年龄、课程的名称等
- **子视图**: 基于特定条件筛选的图谱子集
- **查询深度**: 从根节点开始查询的关系层数
- **入度**: 指向节点的关系数量
- **出度**: 从节点出发的关系数量
- **力导向布局**: 基于物理模拟的布局算法，节点之间存在斥力，边存在引力

## 11. 联系支持

若遇到使用问题或有功能建议，请联系技术支持团队或查阅项目文档。