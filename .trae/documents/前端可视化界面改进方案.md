## 前端可视化界面改进方案

### 1. 节点重叠问题修复

**问题分析**：
- 虽然已调整了COSE布局参数，但在节点数量较多时仍可能出现重叠
- 布局算法的迭代次数可能不足，导致布局未完全收敛
- 节点尺寸固定，可能不适合所有场景

**改进方案**：

#### 1.1 进一步优化COSE布局参数
- 增加`componentSpacing`至150
- 增加`nodeRepulsion`至100000
- 增加`numIter`至2000，确保布局充分收敛
- 增加`idealEdgeLength`至200

#### 1.2 添加节点尺寸动态调整
- 根据节点类型和属性动态调整节点大小
- 确保节点标签完全显示

#### 1.3 实现代码
```javascript
// 修改graph-visualization.tsx中的layoutConfig
const layoutConfig = useMemo<LayoutOptions>(() => {
  const isMobile = typeof window !== "undefined" && window.innerWidth < 768;
  return {
    name: layout,
    fit: true,
    padding: 150,
    animate: true,
    animationDuration: 500,
    ...(layout === "cose"
      ? {
          componentSpacing: 150,
          nodeOverlap: 0,
          refresh: 20,
          idealEdgeLength: isMobile ? 150 : 200,
          nodeRepulsion: (_: NodeSingular) => 100000,
          edgeElasticity: (_: EdgeSingular) => 100,
          nestingFactor: 1.2,
          gravity: 0.3,
          numIter: 2000,
          initialTemp: 1000,
          coolingFactor: 0.99,
          minTemp: 1.0,
          randomize: true,
        }
      : {}),
    // 其他布局配置...
  } as LayoutOptions;
}, [layout]);
```

### 2. 连线视觉差异化改进

**问题分析**：
- 当前连线最大宽度限制为5px，导致权重差异不明显
- 宽度增量仅为0.1px/权重，视觉区分度不足
- 缺乏对数或指数缩放，无法有效展示大范围权重

**改进方案**：

#### 2.1 设计新的连线宽度映射规则
- 移除最大宽度限制，或使用更大的上限
- 采用对数缩放，确保小权重差异和大权重差异都有合适的视觉区分
- 基础宽度1px，权重影响：width = 1 + Math.log(weight + 1) * 2

#### 2.2 优化渲染性能
- 使用CSS变量或预计算宽度，避免实时计算
- 确保连线样式变更不会触发重排

#### 2.3 实现代码
```javascript
// 修改graph-visualization.tsx中的edge样式
{ selector: "edge",
  style: {
    width: (ele: NodeSingular | EdgeSingular) => {
      const weight = ele.data("weight") || 1;
      // 采用对数缩放，基础宽度1px，权重每增加10倍，宽度增加约4.6px
      return Math.max(1, 1 + Math.log(weight + 1) * 2);
    },
    // 其他样式配置...
  },
}
```

### 3. 实现步骤

1. 修改`graph-visualization.tsx`中的布局配置（第213-244行）
2. 更新连线样式计算逻辑（第176-180行）
3. 测试不同数据量下的显示效果
4. 验证不同屏幕分辨率下的适配情况
5. 检查性能表现，确保无卡顿

### 4. 预期效果

- **节点布局**：无重叠现象，节点间距适中，标签清晰可见
- **连线差异化**：不同权重的连线有明显的视觉区分，权重差异直观易懂
- **性能表现**：布局计算充分，渲染流畅，无明显卡顿
- **响应式设计**：适配不同屏幕尺寸，保持良好的可视化效果

### 5. 测试场景

- 少节点（10-20个）场景
- 中等节点（50-100个）场景
- 多节点（200+个）场景
- 移动端和桌面端不同分辨率
- 不同权重范围的数据（0-100）

通过以上改进，预计可以有效解决当前前端可视化界面存在的节点重叠和连线视觉差异化问题，提升整体可读性和用户体验。