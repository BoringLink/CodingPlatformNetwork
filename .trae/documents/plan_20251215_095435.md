# 添加图谱图例的实现计划

## 1. 分析当前代码结构

- **`graph-visualization.tsx`**: 包含图谱可视化的核心组件，定义了节点和边的样式映射
  - 节点颜色映射（nodeColorMap）：Student、Teacher、Course、KnowledgePoint、ErrorType
  - 边颜色映射（edgeColorMap）：CHAT_WITH、LIKES、TEACHES、LEARNS、CONTAINS、HAS_ERROR、RELATES_TO
  - 边样式映射（edgeStyleMap）：solid、dashed、dot等

- **`graph/[[...params]]/page.tsx`**: 图谱页面，包含侧边栏、主可视化区域和各种控制面板

## 2. 实现方案

### 2.1 创建图例组件
- **文件**: `components/graph-legend.tsx`
- **功能**: 展示节点类型和关系类型的图例
- **内容**:
  - 节点图例：显示不同颜色的节点及其代表的类型
  - 边图例：显示不同颜色和样式的边及其代表的关系类型
  - 使用与可视化组件相同的颜色和样式映射
  - 添加中文标签以提高可读性

### 2.2 集成到页面
- **位置**: 左侧边栏（Filter Panel 下方）
- **方式**: 在现有侧边栏内容后添加图例组件
- **布局**: 使用与现有卡片相同的设计风格，保持视觉一致性

### 2.3 保持样式一致性
- 直接复用 `graph-visualization.tsx` 中的颜色和样式映射
- 使用相同的 UI 组件（Card、CardContent 等）
- 适配深色/浅色主题

## 3. 具体实现步骤

1. **创建 `graph-legend.tsx` 组件**：包含节点和边的图例展示
2. **在 `graph/[[...params]]/page.tsx` 中导入并使用图例组件**：将其添加到左侧边栏
3. **确保响应式设计**：在移动设备上保持良好的显示效果
4. **测试**：确保图例与实际图谱显示一致

## 4. 预期效果

- 侧边栏新增"图谱图例"卡片
- 清晰展示不同颜色节点代表的类型
- 清晰展示不同颜色和样式边代表的关系类型
- 不破坏现有页面布局
- 适配深色/浅色主题
